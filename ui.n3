#  Ontology for user interface hints
#
#  See also related: the Fresnel language
#
@prefix contact: <http://www.w3.org/2000/10/swap/pim/contact#>.
@prefix dc:  <http://purl.org/dc/elements/1.1/>.
@prefix doc: <http://www.w3.org/2000/10/swap/pim/doc#>.
@prefix foaf: <http://xmlns.com/foaf/0.1/>.
@prefix owl: <http://www.w3.org/2002/07/owl#>.
@prefix r: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix s: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix tt: <http://dig.csail.mit.edu/2010/issues/track#>.
@prefix ui: <http://www.w3.org/ns/ui#>.
@prefix : <http://www.w3.org/ns/ui#>.
@prefix wf: <http://www.w3.org/2005/01/wf/flow#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.

@keywords is, of, a.

style a r:Property, owl:DataProperty;
	s:label "style";
        prompt "CSS style";
	s:comment """Must be a valid CSS style string such as one could put in
        an HTML style attribute.  Depedning on teh user interface system, this can
        by given to individuals, classes or properties. It is up to a user interface 
        which wants to draw on them to pick how it uses styles from which parts
        of the data it has.  For example, the style of a class may be picked 
        to distinguish information about things in that class.""".

background-color a r:Property, owl:DataProperty;
	s:label "style";
	s:comment """Must be a valid CSS color string such as one could put in
        an HTML style attribute.  This should be in the #xxxxxx form,
        (with 6 digits of hex)  so that it
        can work with Graphviz.""".

sortPriority a r:Property, owl:DataProperty;
        s:label "sort priority";
        s:range xsd:integer;
        s:comment """When individuals or classes must be sorted, this
        if they are given different values of sortPriority a user agent can
        use this as a hint to how to present information.""".

initialProperties a r:Property;
        s:label "initial properties";
        s:domain s:Class;
        s:range r:List; # List of r:Property
        s:comment """A really simple way of enabling user interfaces to 
            create new information about a class of things is to make a define of properties
            to be specified when a information about a new item
            ("New item" here means an item which the system
            does not have prvious information about yet,
            not an items which has just been created,
            like new friend as opposed to new baby)""";
            prompt "Properties to be specified for new ones".

tableProperties a r:Property;
        s:domain s:Class;
        s:label "table properties";
        s:range r:List; # List of r:Property
        s:comment """This  is a crude way of specifying a table-based
            view for objects of this class.""";
            prompt "Properties to be given in a default table view".

prompt  a r:Property;
        s:label "user prompt";
        s:comment """A string for the UI to use if the user needs a longer
        prompts than just a field name, the rdfs:label. """;
        ui:prompt "A longer prompt for a user inputting this property".


#  A Taxonomy of Field types

ui:Form owl:disjointUnionOf ( ui:ValueField ui:LinkField ui:Group ui:Choice ui:Classifier ui:Options ui:Multiple ).
ui:Single owl:disjointUnionOf ( ui:ValueField ui:LinkField ui:Group ui:Choice ui:Classifier ui:Options ).
ui:ValueField owl:disjointUnionOf ( ui:TextField ui:NumericField ui:DateField ).
ui:NumericField owl:disjointUnionOf (ui:BooleanField ui:IntergerField ui:DecimalField ui:FloatField).
# ui:Multiple owl:disjointUnionOf ( ui:ZeroOrMore ui:OneOrMore ).
ui:TextField owl:disjointUnionOf (ui:SingleLineTextField ui:MultiLineTextField).

ui:Form is s:subClassOf of ui:ValueField, ui:LinkField, ui:Group, ui:Choice, ui:Classifier, ui:Options, ui:Multiple.
ui:Single is s:subClassOf of ui:ValueField, ui:LinkField, ui:Group, ui:Choice, ui:Classifier, ui:Options. 
ui:ValueField is s:subClassOf of  ui:TextField, ui:NumericField, ui:DateField.
ui:NumericField is s:subClassOf of ui:BooleanField, ui:IntergerField, ui:DecimalField, ui:FloatField.
ui:TextField is s:subClassOf of ui:SingleLineTextField, ui:MultiLineTextField.

ui:property a r:Property; s:domain ui:Form; s:range r:Property;
    s:label "property"@en;
    s:comment """Many fields prompt for infromation about a given property of the subject""".

ui:category  a r:Property; s:domain ui:Classifier; s:range s:Class;
    s:label "property"@en;
    s:comment """The superclass subclasses of which will be selected.""".

ui:dependingOn a r:Property; s:domain ui:Options; s:range r:Property;
    s:label "depending on"@en;
    s:comment """Many fields prompt for infromation about a gven property of the subject""".

ui:for a r:Property; s:label "for"@en; s:comment "The value for which this case is selected.".
ui:use a r:Property; s:range ui:Form.

ui:part a r:Property; s:label "part"@en ; s:domain ui:Form; s:range ui:Form.  #  Was: s:domain ui:Multiple; s:range ui:Single.

ui:from a r:Property; s:domain ui:Choice; s:range r:Class;
    s:label "from"; ui:prompt "from what class".

ui:fieldLength a r:Property; s:domain ui:TextField; s:range xsd:integer;
    s:label "field length".

ui:minValue a r:Property; s:domain ui:NumericField; s:range xsd:integer; s:label "min".
ui:maxValue a r:Property; s:domain ui:NumericField; s:range xsd:integer; s:label "max".

ui:earliest a r:Property; s:domain ui:DateField; s:range xsd:integer; s:label "min".
ui:tooLate a r:Property; s:domain ui:DateField; s:range xsd:integer; s:label "max".

 ui:creationForm a r:Property; s:domain s:Class; s:range ui:Form;
    s:label "creation form"; 
    s:comment """A form which may be used to collect information about a
    hitherto locally undocumented instance instance of this class.""".
 
########


FormForm a ui:Form;
    dc:title "Form for making new forms";
    is ui:creationForm of Form;
    a ui:Group; ui:part
        [ ui:sequence 1; a ui:SingleLineTextField; ui:property dc:title; ui:length 60 ],
        FieldList.
        
FieldList  ui:sequence 2; a ui:Multiple; ui:property ui:part; ui:part FieldForm .

FieldForm a ui:Group;
    dc:title "Form for selecting a type of field";
    ui:part
        [ a ui:Classifier; ui:sequence 1; ui:property r:type; ui:category ui:Form], 
        
        [ a ui:Options; ui:sequence 2; ui:dependingOn r:type; 

            ui:case [ ui:for ui:TextField; ui:use [a ui:Group; ui:part
                [ a ui:Choice; ui:property ui:property; ui:label "property"; ui:from owl:DataProperty],  # @@@ Needs inference on current web
                [ a ui:NumericField; ui:property ui:size; ui:label "field size"; ui:min 1; ui:max 4096],
                [ a ui:NumericField; ui:property ui:maxLength; ui:label "Max. length of string"; ui:min 1]
            ]];

            ui:case [ ui:for ui:IntergerField, ui:DecimalField, ui:FloatField; ui:use [a ui:Group; ui:part
                [ ui:sequence 1; a ui:Choice; ui:property ui:property; ui:label "property"; ui:from owl:DataProperty],
                [ ui:sequence 2; a ui:NumericField; ui:property ui:min; ui:label "minimum value"],
                [ ui:sequence 3; a ui:NumericField; ui:property ui:max; ui:label "maximum value"]  ]];

            ui:case [ ui:for ui:DateField; ui:use [a ui:Group; ui:part
                [ ui:sequence 1; a ui:Choice; ui:property ui:property; ui:label "property"; ui:from owl:DataProperty], # @@ restsriction
                [ ui:sequence 2; a ui:DateField; ui:property ui:start; ui:label "start date"],
                [ ui:sequence 3; a ui:DateField; ui:property ui:overBy ; ui:label "over by"]
            ]];

            ui:case [ ui:for ui:LinkField; ui:use [a ui:Group; ui:part
                [ ui:sequence 1; a ui:Choice; ui:property ui:property; ui:label "property"; ui:from owl:ObjectProperty],
                [ ui:sequence 2; a ui:BooleanField; ui:property ui:canAddNew; ui:label "user can add new"]
            ]];

            ui:case [ ui:for ui:Group; ui:use FieldForm; ];
            
            ui:case [ ui:for ui:Options; ui:use [a ui:Multiple; ui:property ui:case; ui:part CaseForm]];

            ui:case [ ui:for ui:Choice; ui:use [a ui:Group; ui:part
                [ ui:sequence 1; a ui:Choice; ui:property ui:property; ui:label "property"; ui:from owl:ObjectProperty], # @@ restsriction
                [ ui:sequence 2; a ui:Choice; ui:property ui:from; ui:label "destination class"; ui:from s:Class; ], # @@ restsriction
                [ ui:sequence 2; a ui:Choice; ui:property ui:use; ui:label "Nested Form (if any)"; ui:from ui:Form; ui:optional true] # @@ optional
                
            ]];

            ui:case [ ui:for ui:Multiple; ui:use [a ui:Group; ui:part
                [ui:sequence 1; a ui:Choice; ui:property ui:property; ui:label "property"; ui:from r:Property],
                [ui:sequence 2; a ui:Choice; ui:property ui:part; ui:from ui:Form; ui:use FieldForm] ;  # Form for details of the field part of the multiple
            ]];

        ].

CaseForm a ui:Group;
   dc:title "Form for a conditional case in a form";
   ui:part
        [ ui:sequence 1; a ui:Choice; ui:property ui:for; ui:label "property"; ui:canAddNew true; ui:from owl:ObjectProperty] ,    
         FieldForm.       # @@ Bug:  we can't share the form using the sequence number system.

# ENDS


